<div class="ui-widget-content ui-corner-all klearMatrixFiltering">
<form class="klearMatrixFilteringForm {{if (typeof searchFields == 'undefined') }} not-loaded {{/if}} ">
<p class="title"><span class="ui-silk inline ui-silk-zoom"></span>Filtrado de Campos</p>
    <p class="filterItem">
    <input type="text" class="term">
    <select name="searchFiled">
     {{each(idx,column) columns}}
         {{if (type != '_option') }}
             <option value="${column.id}">${column.name}</option>
         {{/if}}
     {{/each}}
    </select>
    <span class="ui-silk inline ui-silk-add addTerm"></span>
    <br /><span class="addToggle" title="Devuelve los registros que cumplan alguno de los filtros">Sumar todos los filtros
    <input type="checkbox" name="addFilters"
    {{if (searchAddModifier) }}
        checked="checked"
    {{/if}}
    />
    </span>
    <p class="filteredFields">
    {{each(field,searchValues) searchFields}}

        {{if (($item.getColumnName(columns,field))) }}

        <span data-field="${field}" class="field">
            <strong>${$item.getColumnName(columns,field)}</strong>:
            {{each(_valIdx,_val) searchValues}}
                <span class="ui-widget-content ui-corner-all content">
                    <span data-idx="${_valIdx}" class="ui-silk inline ui-silk-cancel"></span>
                    ${$item.getValuesFromSelectColumn($item.getColumn(columns,field),_val)}
                </span>
            {{/each}}
        </span>
        {{/if}}
    {{/each}}
    </p>
</form>
</div>


{{if ($item.data.paginator)}}
    {{if (paginator.pageCount>1)}}
        {{tmpl(paginator) $item.getPaginatorTemplate()}}
    {{/if}}
{{/if}}


<table class="kMatrix">
<caption class="ui-state-active ui-priority-primary">${$item.getTitle(title,false)}</caption>

<tr>
   {{each(idx,column) columns}}
            <th data-field="${column.id}" class="ui-widget-header{{if (type == '_option') }} optionHeader{{/if}}">
            <span class="title">${column.name}</span>
            {{if (column.order)}}
                {{if (column.order=='asc')}}
                    <span class="order asc ui-icon ui-icon-circle-triangle-s"></span>
                {{else}}
                    <span class="order desc ui-icon ui-icon-circle-triangle-n"></span>
                {{/if}}
            {{else}}
                {{if (type != '_option') }}
                <span class="order ui-icon ui-icon-circle-triangle-s ui-state-disabled"></span>
                {{/if}}
            {{/if}}

            </td>
   {{/each}}
</tr>

{{each(idx,row) values}}
<tr data-id="${$item.getIndex(row,pk)}">
   {{each columns}}
   		{{if (type != '_option') }}
			<td class="ui-widget-content{{if ($value.default)}} default{{/if}} {{if ($value.multilang)}} multilang{{/if}}">{{html $item.getIndexFromColumn(row,$value)}}</td>
		{{else}}
			<td class="ui-widget-content options">
			{{each fieldOptions}}
				<a class="_fieldOption option ${type} {{if (defaultOption)}}default{{/if}} ui-state-nojump" href="" data-${type}="${$item.getIndex($value,type)}" title="${$item.getTitle(title,idx)}"><span class="ui-silk inline ${icon}"></span>{{if (label) }}${$item.getTitle(title,idx)}{{/if}}</a>
			{{/each}}
			</td>
		{{/if}}
	{{/each}}
</tr>
{{/each}}
</table>


{{if ($item.data.paginator)}}
    {{if (paginator.pageCount>1)}}
        {{tmpl(paginator) $item.getPaginatorTemplate()}}
    {{/if}}
{{/if}}


{{if (generalOptions.length>0) }}
<div class="generalOptionsToolbar ui-widget-content ui-corner-all">
{{each generalOptions}}
	<a class="_generalOption option ${type}" href="" data-${type}="${$item.getIndex($value,type)}" title="${$item.getTitle(title,false)}" {{if (multiInstance)}} data-multiinstance='true'{{/if}}>
	<span class="ui-silk inline ${icon}"></span>
	{{if (label) }}
	    ${$item.getTitle(title,false)}
	{{/if}}
	</a>
{{/each}}
</div>
{{/if}}